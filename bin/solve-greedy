#!/usr/bin/env python
import click as click
import jigsaw as jgs


@click.command()
@click.argument('input', type=click.Path(exists=True))
@click.argument('output', type=click.Path())
@click.option('-n', '--num-pieces', type=int, default=16)
@click.option('-r', '--random-seed', type=int, default=None)
def solve_greedy(input, output, num_pieces, random_seed):
    images = jgs.subdivide_image(jgs.load_image(input), num_pieces)
    canvas = jgs.solve_greedy(images, random_seed=random_seed)
    jgs.save_image(output, jgs.reconstruct(images, canvas))


if __name__ == '__main__':
    solve_greedy()
